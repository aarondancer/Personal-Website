!function(e){"use strict";e.fn.maximage=function(i){function t(e){window.console&&window.console.log&&window.console.log(e)}var a;("object"==typeof i||void 0===i)&&(a=e.extend(e.fn.maximage.defaults,i||{})),"string"==typeof i&&(a=e.fn.maximage.defaults),e.Body=e("body"),e.Window=e(window),e.Scroll=e("html, body"),e.Events={RESIZE:"resize"},this.each(function(){var d=e(this),n=0,s=[],o={setup:function(){if(e.Slides.length>0){var i,t=e.Slides.length;for(i=0;t>i;i++){var a=e.Slides[i];d.append('<div class="mc-image '+a.theclass+'" title="'+a.alt+'" style="background-image:url(\''+a.url+"');"+a.style+'" data-href="'+a.datahref+'">'+a.content+"</div>")}o.preload(0),o.resize()}},preload:function(i){var t=e("<img/>");t.load(function(){0==n&&(c.setup(),a.onFirstImageLoaded()),n==e.Slides.length-1?a.onImagesLoaded(d):(n++,o.preload(n))}),t[0].src=e.Slides[i].url,s.push(t[0])},resize:function(){e.Window.bind(e.Events.RESIZE,function(){e.Scroll.addClass("mc-hide-scrolls"),e.Window.data("h",h.sizes().h).data("w",h.sizes().w),d.height(e.Window.data("h")).width(e.Window.data("w")).children().height(e.Window.data("h")).width(e.Window.data("w")),d.children().each(function(){this.cycleH=e.Window.data("h"),this.cycleW=e.Window.data("w")}),e(e.Scroll).removeClass("mc-hide-scrolls")})}},r={setup:function(){var i,t,n,s=e.Slides.length;if(e.BrowserTests.msie&&!a.overrideMSIEStop&&document.execCommand("Stop",!1),d.html(""),e.Body.addClass("mc-old-browser"),e.Slides.length>0){for(e.Scroll.addClass("mc-hide-scrolls"),e.Window.data("h",h.sizes().h).data("w",h.sizes().w),e("body").append(e("<div></div>").attr("class","mc-loader").css({position:"absolute",left:"-9999px"})),n=0;s>n;n++)i=0==e.Slides[n].content.length?'<img src="'+e.Slides[n].url+'" />':e.Slides[n].content,t=e("<div>"+i+"</div>").attr("class","mc-image mc-image-n"+n+" "+e.Slides[n].theclass),d.append(t),0==e(".mc-image-n"+n).children("img").length||e("div.mc-loader").append(e(".mc-image-n"+n).children("img").first().clone().addClass("not-loaded"));r.preload(),r.windowResize()}},preload:function(){var i=setInterval(function(){e(".mc-loader").children("img").each(function(i){var t=e(this);if(t.hasClass("not-loaded")&&t.height()>0){e(this).removeClass("not-loaded");var a=e("div.mc-image-n"+i).children("img").first();a.data("h",t.height()).data("w",t.width()).data("ar",t.width()/t.height()),r.onceLoaded(i)}}),0==e(".not-loaded").length&&(e(".mc-loader").remove(),clearInterval(i))},1e3)},onceLoaded:function(i){r.maximage(i),0==i?(d.css({visibility:"visible"}),a.onFirstImageLoaded()):i==e.Slides.length-1&&(c.setup(),e(e.Scroll).removeClass("mc-hide-scrolls"),a.onImagesLoaded(d),a.debug&&(t(" - Final Maximage - "),t(d)))},maximage:function(i){e("div.mc-image-n"+i).height(e.Window.data("h")).width(e.Window.data("w")).children("img").first().each(function(){l.maxcover(e(this))})},windowResize:function(){e.Window.bind(e.Events.RESIZE,function(){clearTimeout(this.id),e(".mc-image").length>=1&&(this.id=setTimeout(r.doneResizing,200))})},doneResizing:function(){e(e.Scroll).addClass("mc-hide-scrolls"),e.Window.data("h",h.sizes().h).data("w",h.sizes().w),d.height(e.Window.data("h")).width(e.Window.data("w")),d.find(".mc-image").each(function(e){r.maximage(e)});var i=d.data("cycle.opts");void 0!=i&&(i.height=e.Window.data("h"),i.width=e.Window.data("w"),jQuery.each(i.elements,function(i,t){t.cycleW=e.Window.data("w"),t.cycleH=e.Window.data("h")})),e(e.Scroll).removeClass("mc-hide-scrolls")}},c={setup:function(){d.addClass("mc-cycle"),e.Window.data("h",h.sizes().h).data("w",h.sizes().w),jQuery.easing.easeForCSSTransition=function(e,i,t,a){return t+a};var i=e.extend({fit:1,containerResize:0,height:e.Window.data("h"),width:e.Window.data("w"),slideResize:!1,easing:e.BrowserTests.cssTransitions&&a.cssTransitions?"easeForCSSTransition":"swing"},a.cycleOptions);d.cycle(i)}},l={center:function(i){a.verticalCenter&&i.css({marginTop:(i.height()-e.Window.data("h"))/2*-1}),a.horizontalCenter&&i.css({marginLeft:(i.width()-e.Window.data("w"))/2*-1})},fill:function(i){var d=i.is("object")?i.parent().first():i;"function"==typeof a.backgroundSize?a.backgroundSize(i):"cover"==a.backgroundSize?e.Window.data("w")/e.Window.data("h")<d.data("ar")?i.height(e.Window.data("h")).width((e.Window.data("h")*d.data("ar")).toFixed(0)):i.height((e.Window.data("w")/d.data("ar")).toFixed(0)).width(e.Window.data("w")):"contain"==a.backgroundSize?e.Window.data("w")/e.Window.data("h")<d.data("ar")?i.height((e.Window.data("w")/d.data("ar")).toFixed(0)).width(e.Window.data("w")):i.height(e.Window.data("h")).width((e.Window.data("h")*d.data("ar")).toFixed(0)):t("The backgroundSize option was not recognized for older browsers.")},maxcover:function(e){l.fill(e),l.center(e)},maxcontain:function(e){l.fill(e),l.center(e)}},h={browser_tests:function(){var i=e("<div />")[0],d=["Moz","Webkit","Khtml","O","ms"],n="transition",s={cssTransitions:!1,cssBackgroundSize:"backgroundSize"in i.style&&a.cssBackgroundSize,html5Video:!1,msie:!1};if(a.cssTransitions){"string"==typeof i.style[n]&&(s.cssTransitions=!0),n=n.charAt(0).toUpperCase()+n.substr(1);for(var o=0;o<d.length;o++)d[o]+n in i.style&&(s.cssTransitions=!0)}return document.createElement("video").canPlayType&&(s.html5Video=!0),s.msie=void 0!==h.msie(),a.debug&&(t(" - Browser Test - "),t(s)),s},construct_slide_object:function(){var i=new Object,n=new Array;return d.children().each(function(){var t=e(this).is("img")?e(this).clone():e(this).find("img").first().clone();i={},i.url=t.attr("src"),i.title=void 0!=t.attr("title")?t.attr("title"):"",i.alt=void 0!=t.attr("alt")?t.attr("alt"):"",i.theclass=void 0!=t.attr("class")?t.attr("class"):"",i.styles=void 0!=t.attr("style")?t.attr("style"):"",i.orig=t.clone(),i.datahref=void 0!=t.attr("data-href")?t.attr("data-href"):"",i.content="",e(this).find("img").length>0&&(e.BrowserTests.cssBackgroundSize&&e(this).find("img").first().remove(),i.content=e(this).html()),t[0].src="",e.BrowserTests.cssBackgroundSize&&e(this).remove(),n.push(i)}),a.debug&&(t(" - Slide Object - "),t(n)),n},msie:function(){for(var e,i=3,t=document.createElement("div"),a=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++i+"]><i></i><![endif]-->",a[0];);return i>4?i:e},sizes:function(){var i={h:0,w:0};if("window"==a.fillElement)i.h=e.Window.height(),i.w=e.Window.width();else{var t=d.parents(a.fillElement).first();0==t.height()||1==t.data("windowHeight")?(t.data("windowHeight",!0),i.h=e.Window.height()):i.h=t.height(),0==t.width()||1==t.data("windowWidth")?(t.data("windowWidth",!0),i.w=e.Window.width()):i.w=t.width()}return i}};if(e.BrowserTests=h.browser_tests(),"string"==typeof i){if(e.BrowserTests.html5Video||!d.is("video")){var w,g=d.is("object")?d.parent().first():d;e.Body.hasClass("mc-old-browser")||e.Body.addClass("mc-old-browser"),e.Window.data("h",h.sizes().h).data("w",h.sizes().w),g.data("h",d.height()).data("w",d.width()).data("ar",d.width()/d.height()),e.Window.bind(e.Events.RESIZE,function(){e.Window.data("h",h.sizes().h).data("w",h.sizes().w),w=d.data("resizer"),clearTimeout(w),w=setTimeout(l[i](d),200),d.data("resizer",w)}),l[i](d)}}else e.Slides=h.construct_slide_object(),e.BrowserTests.cssBackgroundSize?(a.debug&&t(" - Using Modern - "),o.setup()):(a.debug&&t(" - Using Old - "),r.setup())})},e.fn.maximage.defaults={debug:!1,cssBackgroundSize:!0,cssTransitions:!0,verticalCenter:!0,horizontalCenter:!0,scaleInterval:20,backgroundSize:"cover",fillElement:"window",overrideMSIEStop:!1,onFirstImageLoaded:function(){},onImagesLoaded:function(){}}}(jQuery);